<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="data.js"></script>
        <script type="text/javascript" src="navbar.js"></script>
        <!-- <script type="text/javascript" src="renderNavbar.js"></script> -->
        <script type="text/javascript" src="bootstrap.bundle.min.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" />
        <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
        <link href="footer-style.css" rel="stylesheet">

        <script>
            document.addEventListener("DOMContentLoaded", function() {		
                loadDetail();
            });

            var loadDetail = function() {
                var imageLocation = document.getElementById("mainImage");
                var imageTitleLocation = document.getElementById("mainImageTitle");
                var description = document.getElementById("desc");
                var price = document.getElementById("price");

                //get query parameter
                let params = (new URL(document.location)).searchParams;
                let id = params.get("id");

                //get the object from url parameter from json data
                var dataIn = JSON.stringify(data);
                var jsonData = JSON.parse(dataIn);
                var targetObject = "";

                for (var i = 0; i < jsonData.length; i++) {
                    if(id == jsonData[i].id) {
                        targetObject = jsonData[i];
                        break;
                    }
                }

                var image = document.createElement("IMG");
                image.setAttribute("src", targetObject.image);
                image.setAttribute("height", "200vh");
                image.setAttribute("width", "200vw");
                image.setAttribute("alt", targetObject.name);

                var imageName = document.createElement("h1");
                imageName.innerHTML = "<b class='label'>Name: </b>" + targetObject.name;
                imageName.classList.add("text-white", "border-bottom");

                var imageDescription = document.createElement("p");
                imageDescription.innerHTML = "<b class='label'>Description: </b>" + targetObject.description;
                imageDescription.classList.add("text-white", "border-bottom");

                //if the sale price is not 0 or the same as the actual price then put sale
                if(targetObject.price != targetObject.salePrice && targetObject.salePrice != 0) {
                    var imageRealPrice = document.createElement("span");
                    var imageSalePrice = document.createElement("span");
                    imageRealPrice.classList.add("reduce");
                    imageRealPrice.innerHTML = targetObject.price + "$";
                    imageSalePrice.classList.add("price");
                    imageSalePrice.innerHTML = " " + targetObject.salePrice + "$";
                    price.appendChild(imageRealPrice);
                    price.appendChild(imageSalePrice);
                } else {  
                    var imageRealPrice = document.createElement("span");
                    imageRealPrice.innerHTML = "<b class='label'>Price: </b>" + targetObject.price + "$";
                    imageRealPrice.classList.add("price");
                    price.appendChild(imageRealPrice);
                }

                document.getElementById("brand").innerHTML = "<b class='label'>Brand: </b>" + targetObject.brand;

                imageLocation.appendChild(image);
                imageTitleLocation.appendChild(imageName);
                description.appendChild(imageDescription);
            }
        </script>
        <style>
            .label {
                font-size: 2cqw;
                color: grey;
            }

            #product {
                margin-top: 15px;
                margin-bottom: 15px;
            }
        </style>
    </head>
    <body>
        <div id="product" class="container text-white">
            <div class="row">
                <div id="mainImage" class="col-md-6 d-flex align-items-center justify-content-center">
                </div>
                <div class="col-md-6 border rounded">
                <div id="mainImageTitle"></div>
                <h4 class="border-bottom" id="brand">Brand</h4>
                <div id="desc"></div>
                <h4>Specifications:</h4>
                <ul>
                    <li>Gigahertz: 3.5 GHz</li>
                    <li>Power Consumption: 65 W</li>
                </ul>
                <div class="text-center" id="price"></div>
                    <div class="text-center">
                        <button class="btn btn-primary">Add to Cart</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-12 bg-secondary border-top mt-3">
                <h3>Feedback</h3>

                <div class="row border-top mt-3">
                    <div class="card col-8">
                        <div class="row">
                            <div class="col-2">
                                <img class="card-img-top" src="src/usericon.jpg" alt="User pic" style="weight: 100px; width: 100px;">
                            </div>
    
                            <div class="col-3">
                                <h5 class="card-title mt-4">Sample user 1 reviewer</h5>
                            </div>
                        </div>   
                        
                        <ul class="list-group list-group-flush">
                          <li class="list-group-item">I like this item it works very well for me</li>
                        </ul>
                    </div>
                </div>

                <div class="row border-top mt-3">
                    <div class="card col-8">
                        <div class="row">
                            <div class="col-2">
                                <img class="card-img-top" src="src/usericon.jpg" alt="User pic" style="weight: 100px; width: 100px;">
                            </div>
    
                            <div class="col-3">
                                <h5 class="card-title mt-4">Sample user 2 reviewer</h5>
                            </div>
                        </div>   
                        
                        <ul class="list-group list-group-flush">
                          <li class="list-group-item">This item made my dog not like his food anymore</li>
                        </ul>
                    </div>
                </div>

                <div class="row border-top mt-3">
                    <div class="card col-8">
                        <div class="row">
                            <div class="col-2">
                                <img class="card-img-top" src="src/usericon.jpg" alt="User pic" style="weight: 100px; width: 100px;">
                            </div>
    
                            <div class="col-3">
                                <h5 class="card-title mt-4">Sample user 3 reviewer</h5>
                            </div>
                        </div>   
                        
                        <ul class="list-group list-group-flush">
                          <li class="list-group-item">I cannot decide whether I like it or not but it is okay.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
